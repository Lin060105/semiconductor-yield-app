# ğŸ­ Semiconductor Yield Prediction System | åŠå°é«”è‰¯ç‡æ™ºæ…§è¨ºæ–·ç³»çµ±

[![Streamlit App](https://static.streamlit.io/badges/streamlit_badge_black_white.svg)](https://semiconductor-yield-app-tmyu9jwd7kii2zndseugtq.streamlit.app)
[![Python](https://img.shields.io/badge/Python-3.9-blue.svg)](https://www.python.org/)
[![PyCaret](https://img.shields.io/badge/ML-PyCaret-yellow.svg)](https://pycaret.org/)
[![Docker](https://img.shields.io/badge/Docker-Enabled-blue.svg)](https://www.docker.com/)

> **é€™æ˜¯ä¸€å€‹åŸºæ–¼ AI (CatBoost) çš„åŠå°é«”ç”¢ç·šè¼”åŠ©ç³»çµ±ï¼Œèƒ½å¤ é€éæ„Ÿæ¸¬å™¨æ•¸æ“šé æ¸¬æ™¶åœ“æ˜¯å¦ç•°å¸¸ï¼Œä¸¦æä¾›å¯è§£é‡‹æ€§åˆ†æ (SHAP) èˆ‡å‹•æ…‹æ±ºç­–é–€æª»èª¿æ•´åŠŸèƒ½ã€‚**

---

## ğŸš€ ç·šä¸Šå±•ç¤º (Live Demo)

ğŸ‘‰ **[é»æ“Šé€™è£¡é–‹å•Ÿ AI è¨ºæ–·ç³»çµ±](https://semiconductor-yield-app-tmyu9jwd7kii2zndseugtq.streamlit.app)**

*(å»ºè­°ä½¿ç”¨é›»è…¦ç€è¦½å™¨é–‹å•Ÿä»¥ç²å¾—æœ€ä½³é«”é©—)*

---

## ğŸ’¡ å°ˆæ¡ˆäº®é» (Key Features)

é€™å€‹å°ˆæ¡ˆè§£æ±ºäº†å‚³çµ±åŠå°é«”æª¢æ¸¬ä¾è³´äººå·¥è¤‡æª¢ã€æ•ˆç‡ä½è½çš„å•é¡Œã€‚

### 1. ğŸ” å–®ç­†æ·±åº¦è¨ºæ–· (Single Prediction)
- é‡å°å–®ä¸€æ™¶åœ“æ•¸æ“šé€²è¡Œå³æ™‚åˆ†æã€‚
- **å¯è§£é‡‹æ€§ AI (XAI)**ï¼šæ•´åˆ **SHAP Summary Plot**ï¼Œè¦–è¦ºåŒ–å‘ˆç¾å°è‡´ç•°å¸¸çš„é—œéµç‰¹å¾µï¼ˆä¾‹å¦‚ï¼š`Sensor_59` æ•¸å€¼éé«˜ï¼‰ï¼Œè®“å·¥ç¨‹å¸«çŸ¥é“ã€Œç‚ºä»€éº¼å£æ‰ã€ã€‚

### 2. ğŸš€ æ‰¹é‡å¿«é€Ÿç¯©é¸ (Batch Processing)
- æ”¯æ´ä¸Šå‚³ CSV æª”æ¡ˆé€²è¡Œæ•´æ‰¹æ™¶åœ“å¿«ç¯©ã€‚
- è‡ªå‹•æ¨™è¨˜é«˜é¢¨éšªæ™¶åœ“ï¼Œå¤§å¹…ç¸®çŸ­æª¢æ¸¬æ™‚é–“ã€‚

### 3. âš–ï¸ å‹•æ…‹éˆæ•åº¦èª¿æ•´ (Dynamic Threshold)
- **æ¥­ç•Œå¯¦æˆ°æ€ç¶­**ï¼šå…§å»ºã€Œæ±ºç­–é–€æª»æ‹‰æ¡¿ã€ï¼Œå…è¨±å·¥ç¨‹å¸«æ ¹æ“šç”¢ç·šéœ€æ±‚èª¿æ•´ AI çš„åš´æ ¼ç¨‹åº¦ã€‚
- **Trade-off**ï¼šæƒ³è¦ã€Œå¯§å¯éŒ¯æ®ºï¼Œä¸å¯æ”¾éã€æˆ–æ˜¯ã€Œæ¸›å°‘èª¤åˆ¤ã€ï¼Ÿç”±ä½¿ç”¨è€…æ±ºå®šã€‚

---

## ğŸ“Š æ¨¡å‹æ•ˆèƒ½è©•ä¼° (Model Evaluation)

æœ¬å°ˆæ¡ˆç¶“éå¤šæ¨¡å‹ç«¶è³½ (Random Forest, XGBoost, LightGBM, CatBoost)ï¼Œæœ€çµ‚é¸ç”¨è¡¨ç¾æœ€ä½³çš„ **CatBoost Classifier**ï¼Œä¸¦é‡å°åŠå°é«”è£½ç¨‹å¸¸è¦‹çš„é¡åˆ¥ä¸å¹³è¡¡ (Class Imbalance) ä½¿ç”¨ **SMOTE** é€²è¡Œè™•ç†ã€‚

æˆ‘å€‘é¦–è¦ç›®æ¨™æ˜¯æ¥µå¤§åŒ– **Recall (å¬å›ç‡)**ï¼Œä»¥ç¢ºä¿èƒ½æœ‰æ•ˆæ””æˆªç•°å¸¸æ™¶åœ“ï¼Œé™ä½æ¼æ¸¬é¢¨éšªã€‚

### é—œéµæŒ‡æ¨™è¡¨ç¾ (Key Metrics)

| æŒ‡æ¨™ (Metric) | èªªæ˜ (Description) |
| :--- | :--- |
| **Recall (å¬å›ç‡)** | **æ ¸å¿ƒæŒ‡æ¨™**ï¼šé‡å° Fail é¡åˆ¥çš„æª¢å‡ºèƒ½åŠ›ï¼ˆé‡é»å„ªåŒ–ï¼‰ |
| **F1 Score** | ç²¾ç¢ºç‡èˆ‡å¬å›ç‡çš„å¹³è¡¡æŒ‡æ¨™ |
| **AUC** | æ¨¡å‹å€åˆ†è‰¯å“èˆ‡ä¸è‰¯å“çš„æ•´é«”èƒ½åŠ› |

### æ•ˆèƒ½äº®é»
- **ç‘•ç–µæ””æˆªå„ªåŒ–**ï¼šé‡å° Fail é¡åˆ¥åŠ æ¬Šï¼Œå³ä½¿åœ¨è‰¯å“ä½”å¤šæ•¸çš„æƒ…æ³ä¸‹ï¼Œä»èƒ½æº–ç¢ºæŠ“å‡ºç‘•ç–µå“ã€‚
- **é—œéµç‰¹å¾µè­˜åˆ¥**ï¼šæ¨¡å‹èƒ½è‡ªå‹•æå–å°è‰¯ç‡å½±éŸ¿é¡¯è‘—çš„æ„Ÿæ¸¬å™¨æ•¸æ“š (Sensor Data)ï¼Œè¼”åŠ©è£½ç¨‹äººå“¡é€²è¡Œæ ¹å› åˆ†æã€‚

> ğŸ“˜ **å»¶ä¼¸é–±è®€**
> * æ•¸æ“šè™•ç†èˆ‡ç®¡ç·šèªªæ˜ï¼š[Data Pipeline Docs](docs/data_pipeline.md)

---

## ğŸ› ï¸ æŠ€è¡“æ£§ (Tech Stack)

- **æ ¸å¿ƒèªè¨€**ï¼šPython 3.9
- **æ©Ÿå™¨å­¸ç¿’**ï¼šAutoML (PyCaret), **CatBoost**, Scikit-learn
- **è³‡æ–™è™•ç†**ï¼šPandas, NumPy, SMOTE
- **è¦–è¦ºåŒ–èˆ‡ä»‹é¢**ï¼šStreamlit, Matplotlib, SHAP
- **DevOps & éƒ¨ç½²**ï¼šDocker, GitHub Actions, Streamlit Cloud

---

## ğŸ’° Business Context: Cost Matrix Analysis

åœ¨åŠå°é«”è£½é€ ä¸­ï¼Œä¸åŒé¡å‹çš„é æ¸¬éŒ¯èª¤æœƒå¸¶ä¾†ä¸åŒçš„æˆæœ¬è¡æ“Šã€‚æœ¬å°ˆæ¡ˆå…è¨±ä½¿ç”¨è€…é€é App å‹•æ…‹èª¿æ•´åˆ¤å®šé–¾å€¼ï¼ˆThresholdï¼‰ï¼Œä»¥ç¬¦åˆç•¶ä¸‹çš„å•†æ¥­ç­–ç•¥ã€‚

### æˆæœ¬çŸ©é™£ (Cost Matrix)

| å¯¦éš›ç‹€æ³ \ é æ¸¬çµæœ | é æ¸¬ Pass (0) | é æ¸¬ Fail (1) |
| :--- | :--- | :--- |
| **å¯¦éš› Pass (0)** | âœ… **True Negative**<br>æ­£å¸¸å‡ºè²¨<br>(Cost: $0) | âš ï¸ **False Positive (èª¤æ®º)**<br>æµªè²»é‡æ¸¬æˆæœ¬/å ±å»¢è‰¯å“<br>(Cost: Low ~ Medium) |
| **å¯¦éš› Fail (1)** | âŒ **False Negative (æ¼æª¢)**<br>å®¢æˆ¶é€€è²¨ã€è³ å„Ÿã€ä¿¡è­½å—æ<br>(Cost: **Very High**) | âœ… **True Positive**<br>æˆåŠŸæ””æˆªç‘•ç–µå“<br>(Cost: Saved!) |

### ç‚ºä»€éº¼éœ€è¦èª¿æ•´é–¾å€¼ (Threshold)ï¼Ÿ

- **é è¨­ (0.5)**ï¼šå¹³è¡¡æº–ç¢ºç‡èˆ‡å¬å›ç‡ã€‚
- **èª¿ä½ (e.g., 0.3)**ï¼š**åš´æ ¼æ¨¡å¼**
  - ç›®çš„ï¼šå¯§å¯éŒ¯æ®ºï¼Œä¸å¯æ”¾éã€‚
  - é©ç”¨æƒ…å¢ƒï¼šè»Šç”¨é›»å­ã€èˆªå¤ªæ™¶ç‰‡ç­‰é«˜å¯é åº¦è¦æ±‚ç”¢å“ã€‚
  - çµæœï¼šRecall ä¸Šå‡ï¼ˆæŠ“å‡ºæ›´å¤šç‘•ç–µï¼‰ï¼Œä½† False Positive ä¹Ÿæœƒå¢åŠ ï¼ˆèª¤æ®ºè‰¯å“ï¼‰ã€‚
- **èª¿é«˜ (e.g., 0.7)**ï¼š**å¯¬é¬†æ¨¡å¼**
  - ç›®çš„ï¼šé™ä½å ±å»¢ç‡ï¼Œç¯€çœæˆæœ¬ã€‚
  - é©ç”¨æƒ…å¢ƒï¼šæ¶ˆè²»æ€§é›»å­ï¼ˆå¦‚ä½éšç©å…·æ™¶ç‰‡ï¼‰ã€‚

---

## ğŸ’» å¦‚ä½•åœ¨æœ¬åœ°ç«¯åŸ·è¡Œ (Local Installation)

å¦‚æœæ‚¨æƒ³åœ¨è‡ªå·±çš„é›»è…¦ä¸Šé‹è¡Œæ­¤å°ˆæ¡ˆï¼š

**1. Clone å°ˆæ¡ˆ**
```bash
git clone https://github.com/Lin060105/semiconductor-yield-app.git
cd semiconductor-yield-app
```

**2. å®‰è£ä¾è³´å¥—ä»¶**
```bash
pip install -r requirements.txt
```

**3. å•Ÿå‹•ç³»çµ±**
```bash
streamlit run app.py
```

---

## ğŸ³ Docker Deployment (å®¹å™¨åŒ–éƒ¨ç½²)

æœ¬å°ˆæ¡ˆæ”¯æ´ Docker éƒ¨ç½²ï¼Œç¢ºä¿åœ¨ä»»ä½•ç’°å¢ƒä¸‹çš†å¯ç©©å®šåŸ·è¡Œã€‚

**1. Build Docker Image (å»ºç«‹æ˜ åƒæª”)**
```bash
docker build -t yield-prediction-app .
```

**2. Run Container (å•Ÿå‹•å®¹å™¨)**
```bash
docker run -d -p 8501:8501 --name yield-app yield-prediction-app
```

å•Ÿå‹•å¾Œï¼Œè«‹ç€è¦½ï¼š`http://localhost:8501`

---

## ğŸ§ª Testing (æ¸¬è©¦)

æœ¬å°ˆæ¡ˆåŒ…å«è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œç”¨æ–¼é©—è­‰è³‡æ–™ç®¡ç·šèˆ‡æ¨¡å‹è¼‰å…¥é‚è¼¯ã€‚

**åŸ·è¡Œæ¸¬è©¦æŒ‡ä»¤**
```bash
pytest tests/
```

**é æœŸè¼¸å‡ºï¼š**
```
==== 4 passed in 0.xxs ====
```

---

## ğŸ“ é–‹ç™¼ç´€éŒ„

| Level | é‡Œç¨‹ç¢‘ |
| :--- | :--- |
| Level 1 | æ•¸æ“šæ¸…æ´—èˆ‡ UCI è³‡æ–™é›†ç‰¹å¾µå·¥ç¨‹ |
| Level 2 | ä½¿ç”¨ PyCaret æ¯”è¼ƒ 10+ ç¨®æ¼”ç®—æ³• |
| Level 3 | è§£æ±ºè³‡æ–™ä¸å¹³è¡¡å•é¡Œ (SMOTE)ï¼Œå„ªåŒ– Recall ç‡ |
| Level 6 | åŠ å…¥å•†æ¥­é‚è¼¯ï¼ˆThreshold Tuningï¼‰ï¼Œè§£æ±ºæ¨¡å‹éæ–¼ä¿å®ˆçš„å•é¡Œ |
| Level 7 | æˆåŠŸéƒ¨ç½²è‡³ Streamlit Cloud |
| Level 8 | **[NEW]** å°å…¥ Docker å®¹å™¨åŒ–éƒ¨ç½²èˆ‡ Pytest è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œå®Œæˆ MLOps åŸºç¤å»ºè¨­ |